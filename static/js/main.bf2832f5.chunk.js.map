{"version":3,"sources":["config.js","EthContext.js","TopAlert.js","useTopAlert.js","SmallLoadingBar.js","util.js","Navigation.js","LoadingBar.js","PlantFeature.js","PlantGridUnit.js","PlantGrid.js","ts.js","OverlayPhoto.js","Album.js","Plant.js","PageTail.js","usePageTracking.js","App.js","serviceWorker.js","index.js"],"names":["EthProvider","VideoServer","VideoPrefix","ethLink","provider","ethers","providers","JsonRpcProvider","signer","nft","undefined","account","chkProvider","this","detectEthereumProvider","then","resProvider","console","log","getNft","Contract","PlantNFT","abi","setAppState","appSetAccount","appSetNft","a","login","Web3Provider","Error","getSigner","getAddress","window","ethereum","on","accounts","String","EthContext","React","createContext","TopAlert","memo","children","closeModal","domEl","document","getElementById","ReactDOM","createPortal","Alert","variant","onClose","dismissible","style","marginBottom","useTopAlert","useState","isVisible","setIsVisible","msg","setMsg","hide","showMessage","scrollTo","setTimeout","RenderTopAlert","Fragment","SmallLoadingBar","className","playRemote","name","videoId","pc","RTCPeerConnection","sdpSemantics","addTransceiver","direction","ontrack","event","el","createElement","track","kind","srcObject","streams","autoplay","controls","muted","setAttribute","appendChild","createOffer","offer","setLocalDescription","fetch","method","headers","body","JSON","stringify","res","json","setRemoteDescription","catch","alert","Navigation","loginLoading","setLoginLoading","useContext","showLoginFail","LoginFail","message","scrollIntoView","behavior","block","addr","loginHtml","push","key","shortAddr","substring","length","Nav","Link","onClick","loginEth","Navbar","collapseOnSelect","expand","bg","padding","Brand","as","to","fontSize","Toggle","aria-controls","Collapse","id","goContact","LoadingBar","props","show","type","color","height","width","l","PlantFeature","feature","setFeature","useEffect","jsonURL","result","error","fetchFeature","featureHtml","liKey","featureUnit","library","add","faEye","PlantGridUnit","priceHtml","setName","owner","setOwner","price","setPrice","listSell","setListSell","listSellPrice","setListSellPrice","changeRow","setChangeRow","isLoading","setIsLoading","setPC","tokenId","buyNFT","once","i_tokenId","buy","value","parseInt","ownerOf","own","utils","parseEther","toString","priceWei","setForSale","cancelSale","nftName","getSale","close","get_pc","step","min","onChange","target","Button","sellNFT","cancelSell","ethHtml","formatUnits","plantPath","icon","PlantGrid","totalSupply","setTotalSupply","i","childCall","items","parent","ts2time","unixTs","date","Date","hours","getHours","minutes","getMinutes","seconds","getSeconds","substr","ts2date","mon","getMonth","day","getDate","getFullYear","OverlayPhoto","current","setCurrent","preHtml","handlePrevious","nextHtml","handleNext","handleClose","alt","description","src","prefix","suffix","Album","forwardRef","ref","photoTsAry","setPhotoTsAry","setUpdateTs","showOverlayPhoto","setShowOverlayPhoto","photoCurrentTs","setPhotoCurrentTs","foucusImgId","setFocusImgId","showPhoto","phototTs","split","tsAry","fSplit","ts","sort","b","fetchPhotoList","elId","offsetPosition","getBoundingClientRect","top","scrollToTargetAdjusted","useImperativeHandle","addPhoto","newPhoto","dateStr","hasOwnProperty","imgTs","newArray","concat","cleanValue","now","tmpDatePhotoDic","preDate","datePhotoAry","NaN","datePhotosHtml","photoUrl","photoCurrentTsIdx","indexOf","timezone","datetime","Intl","DateTimeFormat","resolvedOptions","timeZone","ts2datetime","currentUrl","preFunc","nextFunc","displayName","faCamera","Plant","setTokenId","albumRef","useRef","useParams","showFail","ErrorBox","signMessage","snapshotSign","postUrl","rawResponse","albumResult","nftID","nftId","takePhoto","PageTail","href","rel","usePageTracking","location","useLocation","pathname","search","tagManagerArgs","dataLayer","page","dataLayerName","TagManager","App","setNft","setAccount","gnft","Provider","exact","path","Boolean","hostname","match","initialize","gtmId","render","StrictMode","basename","process","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.bf2832f5.chunk.js","sourcesContent":["export const EthProvider = \"https://rinkeby.infura.io/v3/3a52c6e97b6c46d6a43b0a95ec99f19b\"; //\"http://192.168.0.117:7545\";\nexport const VideoServer = \"https://v.ethplant.com\"; //\"http://192.168.0.117:8443\"; \"https://v.ethplant.com\"\nexport const VideoPrefix = VideoServer + \"/@\";\n// ETH\nexport const contractAddress ='0x3ED33cb2373C59958d37ACDC2869F3E2c131a019';\n","import React from \"react\";\nimport { ethers } from \"ethers\";\nimport PlantNFT from \"./contracts/PlantNFT.json\";\nimport {EthProvider, contractAddress} from \"./config.js\"\nimport detectEthereumProvider from '@metamask/detect-provider';\n\nexport const ethLink = {\n    provider : new ethers.providers.JsonRpcProvider(EthProvider),\n    signer : null, \n    nft: undefined,\n    account: '',\n    chkProvider: function(){\n        if (this.provider===undefined){\n            detectEthereumProvider().then( resProvider =>{\n                if (resProvider) {\n                    // From now on, this should always be true:\n                    // provider === window.ethereum\n                    // startApp(provider); // initialize your app\n                    console.log('get provider!');\n                    this.provider = resProvider;\n                } else {\n                    console.log('Please install MetaMask!');\n                    this.provider = new ethers.providers.JsonRpcProvider(EthProvider);\n                }\n\n            });\n        }\n        // console.log(\"this.provider:\");\n        // console.log(this.provider);\n    },\n    getNft: function() {\n        // console.log(\"in getNFT()\");\n        this.chkProvider();\n        if(this.nft===undefined){\n            console.log(\"in this.nft===undefined\");\n            this.nft = new ethers.Contract(contractAddress, PlantNFT.abi, this.provider);\n        }\n        return this.nft;\n    },\n    setAppState: async function(appSetAccount, appSetNft) {\n        this.appSetAccount = appSetAccount;\n        this.appSetNft = appSetNft;\n    },\n    login: async function() {\n        // console.log(\"in login()\");\n        \n        try {\n            const provider = await detectEthereumProvider(false, false, 2);\n            if (provider) {\n            // From now on, this should always be true:\n            // provider === window.ethereum\n                this.provider = new ethers.providers.Web3Provider(provider)\n            } else {\n                console.log('Please install MetaMask!');\n                throw new Error('You don\\'t have MetaMask, please install it!'); \n            }\n            console.log(\"this.provider:\");\n            console.log(this.provider);\n            \n            \n            this.signer = this.provider.getSigner();\n            this.account = await this.signer.getAddress();\n            this.nft = new ethers.Contract(contractAddress, PlantNFT.abi, this.signer);\n\n            this.appSetAccount(this.account);\n            this.appSetNft(this.nft);\n            window.ethereum.on('accountsChanged', (accounts) => {\n                console.log(\"accounts:\" + String(accounts));\n                this.login();\n            });\n            \n            return this.account;\n        } catch (e) {\n            // console.log(e.name + ': ' + e.message);\n            throw e;\n        }\n        \n    },\n\n};\n  \nexport const EthContext = React.createContext();\n  ","\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport Alert from 'react-bootstrap/Alert';\n// type Props = {\n//   children: React.ReactChild\n//   closeModal: () => void\n// }\n\nconst TopAlert = React.memo(({ children, closeModal }: Props) => {\n// const Modal = () => {\n  const domEl = document.getElementById('top-alert')\n\n  if (!domEl) return null\n  \n  // This is where the magic happens -> our modal div will be rendered into our 'modal-root' div, no matter where we\n  // use this component inside our React tree\n  return ReactDOM.createPortal(\n    // <div>\n    //   <button onClick={closeModal}>Close</button>\n    //   {children}\n    // </div>,\n    <Alert variant=\"danger\" onClose={closeModal} dismissible style={{marginBottom: 0}} >\n      {/* <Alert.Heading>Oh snap! You got an error!</Alert.Heading> */}\n       {children}\n    </Alert>,\n    domEl\n  )\n});\n\nexport default TopAlert;","import React, { useState } from 'react'\n\nimport TopAlert from './TopAlert.js'\n\n// Renders a modal to the modal root and handles the visibility state\n// of this modal.\n//\n// NOTE: Each modal you want to render should use a separate hook!!!\n// Otherwise your modals will share their visibility state which might lead\n// to overlapping and unclosable elements.\nexport const useTopAlert = () => {\n  const [isVisible, setIsVisible] = useState(false)\n  const [msg, setMsg] = useState(\"\")\n  \n  const showMessage = (msg) => {\n    window.scrollTo(0, 0);\n    setIsVisible(true);\n    setMsg(msg);\n    setTimeout(function() {\n      hide();\n    }, 5000);\n  };\n  const hide = () => {\n    setIsVisible(false)\n  }\n  \n  // const RenderTopAlert = ({ children }: { children: React.ReactChild }) => (\n  //   <React.Fragment>\n  //     {isVisible && <TopAlert closeModal={hide}>{msg}</TopAlert>}\n  //   </React.Fragment>\n  // )\n  const RenderTopAlert = () => (\n    <React.Fragment>\n      {isVisible && <TopAlert closeModal={hide}>{msg}</TopAlert>}\n    </React.Fragment>\n  )\n\n  return {\n    showMessage,\n    hide,\n    RenderTopAlert,\n  }\n}","import React from 'react';\nimport \"./css/loading-bar.css\"\n\nexport default function SmallLoadingBar() {\n// export default function SmallLoadingBar = (props) => {\n\n    return(\n        <div className=\"loader-container\">\n            <div className=\"loader-bar\"></div>\n            <div className=\"loader-bar\"></div>\n            <div className=\"loader-bar\"></div>\n            <div className=\"loader-bar\"></div>\n        </div>\n    );\n};\n\n","import {VideoPrefix} from \"./config.js\" \n\nexport function playRemote(name, videoId){\n    if (name==='' || name ===undefined){\n        return;\n    }\n    let pc = new RTCPeerConnection({ sdpSemantics : \"unified-plan\" })\n    // let pc = new RTCPeerConnection ({ sdpSemantics : \"plan-b\" });\n    // pc.addTransceiver('video')\n    // pc.addTransceiver('video')\n    pc.addTransceiver('video', {direction: \"recvonly\"})\n\n    pc.ontrack = function (event) {\n        var el = document.createElement(event.track.kind)\n        el.srcObject = event.streams[0]\n        el.autoplay = true\n        el.controls = true\n        el.muted = true\n        el.setAttribute('autoplay', '');\n        el.setAttribute('muted', '');\n        el.setAttribute('playsInline', '');\n\n        el.className = \"videoFull\"\n        // document.getElementById(name + 'Video').appendChild(el)\n        document.getElementById(videoId).appendChild(el)\n    }\n\n    pc.createOffer()\n    .then(offer => {\n        pc.setLocalDescription(offer)\n        // console.log(\"offer:\");\n        // console.log(JSON.stringify(offer));\n        return fetch(VideoPrefix + name +'/video', {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json, text/plain, */*',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(offer)\n        })\n    })\n    .then(res => {\n        console.log(`res:`);\n        console.log(res);\n        return res.json();\n    })\n    .then(res => pc.setRemoteDescription(res))\n    .catch(alert)\n\n    return pc;\n}\n\n\nexport function shortAddress(addr){\n    return  addr.substring(0,6) + \"...\" + addr.substring(addr.length-4, addr.length);\n}\n\nexport function scrollToTargetAdjusted(elId){\n    var element = document.getElementById(elId);\n    var headerOffset = 50;\n    // console.log(\"element\");\n    // console.log(element.getBoundingClientRect());\n\n    var elementPosition = element.getBoundingClientRect().top;\n    var offsetPosition = elementPosition - headerOffset;\n\n    window.scrollTo({\n         top: offsetPosition,\n         behavior: \"smooth\"\n    });\n}\n/*\nasync function playRemote(name){\n    let pc = new RTCPeerConnection()\n    pc.addTransceiver('video')\n\n    pc.ontrack = function (event) {\n        var el = document.createElement(event.track.kind)\n        el.srcObject = event.streams[0]\n        el.autoplay = true\n        el.controls = true\n        el.muted = true\n\n        document.getElementById(name + 'Video').appendChild(el)\n    }\n\n\n\n    let offer =  await pc.createOffer()\n    l(\"offer:\" + JSON.stringify(offer));\n    const postUrl = \"http://localhost:8080/@\" + name + \"/video\"; // \"/photo/take\";//name + \"/video\";\n    const rawResponse = await fetch(postUrl, {\n        method: 'POST',\n        headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(offer)//JSON.stringify({\"name\":\"adam\", \"action\":\"takephoto\", \"sign_data\":\"\"}) //JSON.stringify(offer)\n    });\n    const res = await rawResponse.json();\n    l(\"res:\" + res);\n}*/","import React,  {useContext, useState} from 'react'\nimport { Link } from 'react-router-dom'\nimport \"./css/navagation.css\"\nimport { Navbar, Nav } from 'react-bootstrap'\nimport {EthContext} from \"./EthContext.js\"\nimport { useTopAlert } from './useTopAlert'\nimport SmallLoadingBar from './SmallLoadingBar'\nimport {shortAddress} from './util'\n\n// import ReactLoading from 'react-loading';\n\n// export default Navigation = (props) => {\nexport default function Navigation() {\n    const [loginLoading, setLoginLoading] = useState(false);\n    const {ethLink, account} = useContext(EthContext);\n    // const msgCxt = useContext(MsgBoxContext);\n    // const { show, RenderTopAlert } = useTopAlert() // we could also spread 'hide' here, if we somehow needed it outside of the modal\n    const { hide, showMessage: showLoginFail, RenderTopAlert: LoginFail} = useTopAlert() \n    // const [mAccount, mSetAccount] = useState('');\n\n    async function loginEth(){\n        // setShowError(false);\n        hide()\n        setLoginLoading(true);\n        try {\n            await ethLink.login();\n            // setAccount(a);\n            // setNft(ethLink.getNft());\n        } catch (e) {\n            console.log(\"loginEth(): \" + e.name + ': ' + e.message);\n            // alert(e.message);\n            showLoginFail(e.message);\n        }\n        setLoginLoading(false);\n    }\n\n    async function goContact(){\n        document.getElementById('contact-div').scrollIntoView({ behavior: 'smooth', block: 'end' })\n    }\n\n    // async function testSetNft(){\n    //     let nft = ethLink.getNft();\n    //     setNft(nft);\n    // }\n    \n    // console.log(\"in NAV!!\");\n    let loginHtml = [];\n    if (loginLoading){\n        loginHtml.push(<SmallLoadingBar key=\"login-loadingbar\" /> );\n    }else{\n        if (account!==''){\n            // console.log(\"in account!==''!!\");\n            let shortAddr = shortAddress(account);\n            // console.log(\"in account!==''!!\");\n            loginHtml.push(<Nav.Link key=\"login\">{shortAddr}</Nav.Link> );\n        }else{\n            loginHtml.push(<Nav.Link key=\"login\" onClick={() => loginEth() } >Login</Nav.Link> );\n        }\n    }\n\n\n    return (\n        <>\n        <Navbar collapseOnSelect expand=\"md\" bg=\"light\" style={{padding: '0.5rem 2.5rem'}} >\n        <Navbar.Brand as={Link} to=\"/\" style={{fontSize: '2rem'}}  >ethPlant.com</Navbar.Brand>\n        <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\n        <Navbar.Collapse id=\"responsive-navbar-nav\">\n            <Nav className=\"ml-auto\">\n                <Nav.Link key=\"home\" as={Link} to=\"/\" >Home</Nav.Link>\n                <Nav.Link key=\"contact\" onClick={() => goContact()} >Contact</Nav.Link>\n                {loginHtml}\n          </Nav>\n        </Navbar.Collapse>\n      </Navbar>\n      <LoginFail />\n     </>\n    );\n};","import React from 'react';\nimport ReactLoading from 'react-loading';\nimport './css/LoadingBar.scss';\nexport default function LoadingBar(props){ \n    if (!props.show) return null;\n    return (\n        <div id=\"overlay\">\n            <div className=\"w-100 d-flex justify-content-center align-items-center\">\n                <ReactLoading type={\"bars\"} color={\"#fff\"} height={'20%'} width={'20%'} />\n            </div>\n        </div>\n        \n    );\n};","import React, { useState, useEffect } from 'react';\nconst l = console.log;\n\nexport const PlantFeature = (props) => {\n    const [feature, setFeature] = useState([]);\n    useEffect(() => {\n        // l(\"props.name:\" + props.name);\n        if (props.name!==\"\"){\n            fetchFeature(props.name)\n        }\n    }, [props.name]);\n\n    function fetchFeature(name) {\n        let jsonURL = \"/data/\" + name + \".json\";\n        fetch(jsonURL)\n        .then(res => res.json())\n        .then(\n            (result) => {\n                setFeature(result['features'])\n            },\n            // Note: it's important to handle errors here\n            // instead of a catch() block so that we don't swallow\n            // exceptions from actual bugs in components.\n            (error) => {\n                l(\"jsonURL:\" + jsonURL);\n                l(\"fetchFeature error: \");\n                l(error);\n            }\n        )\n    }\n\n    let featureHtml = [];\n    let liKey=0;\n    for (const featureUnit of feature) {\n        liKey++;\n        featureHtml.push(<li key={liKey}>{featureUnit}</li>);\n    }\n\n    return(\n        <ul style={{\"paddingLeft\": \"0rem\"}}>\n            {featureHtml}\n        </ul>\n    )\n\n}","import React, { useState, useEffect } from 'react';\nimport { ethers } from \"ethers\";\n\nimport LoadingBar from './LoadingBar'\n// bootstrap\nimport Button from 'react-bootstrap/Button';\n// router\nimport {Link} from \"react-router-dom\";\n// fontawesome\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEye } from '@fortawesome/free-solid-svg-icons'\nimport { playRemote } from './util.js';\nimport { PlantFeature } from './PlantFeature';\nimport {EthContext} from \"./EthContext.js\";\n//css\nimport './css/PlantGridUnit.scss';\n\nlibrary.add(faEye)\n\nconst l = console.log;\n\nconst PlantGridUnit = (props) => {\n    const [name, setName] = useState('');\n    const [owner, setOwner] = useState('0x');\n    const [price, setPrice] = useState(0);\n    const [listSell, setListSell] = useState(false);\n    const [listSellPrice, setListSellPrice] = useState(0);\n    const [changeRow, setChangeRow] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n    const [pc, setPC] = useState(null);\n    const {nft, account} = React.useContext(EthContext);\n    let tokenId = props.id; // token id\n    // let nft = props.nft;\n    let videoId = name + \"Video\";\n    // l(\"in gridunit tokenId=\" + tokenId);\n\n    useEffect(() => {\n        l('in PlantGridUnit useEffect(), id:' +props.id);\n        if (nft===undefined){\n            return\n        }\n        nft.nftName(tokenId).then(nftName => {\n            setName(nftName);\n        });\n\n        nft.ownerOf(tokenId).then(own => {\n            setOwner(own);\n        });\n\n        nft.getSale(tokenId).then(price => {\n            setPrice(price);\n        });\n\n        // Update the document title using the browser API\n        return function cleanup() {\n        //   l('in PlantItem cleanup(), id:' +props.id);\n        };\n    }, [nft, tokenId, props.id]);\n\n    useEffect(() => {\n        return function cleanup() {\n            if (pc!==null && pc!==undefined){\n                pc.close();\n            }\n        };\n    }, [pc]);\n\n    useEffect(() => {\n        let get_pc = playRemote(name, videoId);\n        setPC(get_pc);\n    }, [name, videoId]);\n    \n    async function buyNFT() {\n        await nft.once(\"NFTBuyEvent\", (i_tokenId) => {\n            l(\"in NFTBuyEvent FIRST:, i_tokenId:\" + i_tokenId);\n        });\n        setIsLoading(true);\n        try {\n            await nft.buy(tokenId, {value: price});\n        }catch (error) {   \n            console.log(\"Buy error:\" + error);\n            setIsLoading(false);\n        }  \n        await nft.once(\"NFTBuyEvent\", (i_tokenId) => {\n            l(\"in NFTBuyEvent\");\n            if (parseInt(i_tokenId)===tokenId){\n                nft.ownerOf(tokenId).then(own => {\n                    setOwner(own);\n                });\n                setIsLoading(false);\n            }\n        });\n        \n    }\n    \n    async function sellNFT() {\n        // try to ignore the event\n        await nft.once(\"NFTSellEvent\", (i_tokenId, price) => {\n            l(\"in NFTSellEvent FIRST:, i_tokenId:\" + i_tokenId + \", price:\" + price);\n        });\n\n        let priceWei = await ethers.utils.parseEther(listSellPrice.toString());\n        // l(\"Sell Price: \" + price+ \", priceWei:\" + priceWei);\n        setIsLoading(true);\n        try {\n            await nft.setForSale(tokenId, priceWei);\n        } catch (error) {   \n            console.log(\"Sale error:\" + error);\n            setListSell(false);\n            setChangeRow(false);\n            setIsLoading(false);\n        }\n\n        await nft.once(\"NFTSellEvent\", (i_tokenId, price) => {\n            l(\"in NFTSellEvent:, i_tokenId:\" + i_tokenId + \", price:\" + price);\n\n            if (parseInt(i_tokenId)===tokenId){\n                setPrice(price);\n                setListSell(false);\n                setChangeRow(false);\n                setIsLoading(false);\n            }\n        });\n        \n    }\n    \n    async function cancelSell() {\n        await nft.once(\"NFTSellEvent\", (i_tokenId, price) => {\n            l(\"in cancelSell NFTSellEvent FIRST:, i_tokenId:\" + i_tokenId + \", price:\" + price);\n        });\n        setIsLoading(true);\n\n        try {\n            await nft.cancelSale(tokenId);\n        }catch (error) {   \n            console.log(\"cancelSale error:\" + error);\n            setListSell(false);\n            setChangeRow(false);\n            setIsLoading(false);\n        }  \n        \n        await nft.once(\"NFTSellEvent\", (i_tokenId, price) => {\n            if (parseInt(i_tokenId)===tokenId){\n                setPrice(price);\n                setListSell(false);\n                setChangeRow(false);\n                setIsLoading(false);\n            }\n        });\n        \n    }\n\n    var priceHtml;\n    // l(\"unit id(%d) owener:%s, account:%s\", tokenId, owner, account);\n    // l(\" type(owener):%s, account:%s\", typeof(owner), typeof(account));\n    if (owner===account){\n        // ------------ the item belong owner ------------ //\n        if (listSell){\n            priceHtml = [\n                <div key=\"0\" className=\"row list-sell\"> \n                    <input type=\"number\" step=\"0.01\" min=\"0\" \n                           id=\"sellprice\" name=\"sellprice\" onChange={event => setListSellPrice(event.target.value)}/>\t\n                    <Button className=\"sellbtn\" variant=\"danger\" onClick={() => sellNFT(false)}>Sell</Button>          \n                    <Button className=\"close\" variant=\"secondary\" onClick={() => setListSell(false)}>X</Button>\n                </div>];\n\n        } else if (price > 0){\n            if (!changeRow){\n                let formattedBalance = ethers.utils.formatUnits(price, 18);\n                let ethHtml = \"Ξ \" + formattedBalance;\n                priceHtml = [<div key=\"0\" className=\"row\"> \n                                    <div className=\"col-5 price\">{ethHtml}</div>\n                                    <div className=\"col-7 price-btn\">\n                                        <Button variant=\"outline-warning\" onClick={() => setChangeRow(true)}>Change</Button>\n                                    </div>\n                            </div>];\n            }else{\n                priceHtml = [\n                    <div key=\"price-div\" className=\"row change-price-row\"> \n                        <Button key=\"price-btn\"  className=\"change-price\" variant=\"danger\" onClick={() => setListSell(true)}>Price</Button>          \n                        <Button key=\"revoke-btn\"  className=\"revoke-sale\" variant=\"secondary\" onClick={() => cancelSell()}>Revoke</Button>\n                        <Button key=\"x-btn\"  className=\"close\" variant=\"secondary\" onClick={() => setChangeRow(false)}>X</Button>\n                    </div>];\n            }\n        }else{\n            // l(\"in owner==account else, should price <= 0\");\n            priceHtml = [<div key=\"0\" className=\"row\"> \n                            <div className=\"col-5 price\">No Sale</div>\n                            <div className=\"col-7 price-btn\">\n                                <Button variant=\"outline-danger\" onClick={() => setListSell(true)}>List Sell</Button>\n                            </div>\n                        </div>];\n            \n        }\n    }else{\n        // ------------ the item is NOT belong owner ------------ //\n        if (price > 0){\n            let formattedBalance = ethers.utils.formatUnits(price, 18);\n            let ethHtml = \"Ξ \" + formattedBalance;\n            priceHtml = [<div key=\"0\" className=\"row\"> \n                                <div className=\"col-5 price\">{ethHtml}</div>\n                                <div className=\"col-7 buy-btn-row\">\n                                    <Button variant=\"success\" onClick={async () => {await buyNFT();} }>Buy</Button>\n                                </div>\n                        </div>];\n        \n        }else{\n            priceHtml = \"No Sale\";\n        }\n    }\n    const plantPath = \"/@\" +name;\n   \n    return (\n\n    <div className=\"col-md-4 col-sm-6 plant-grid-unit\">\n        <LoadingBar show={isLoading} />\n        <div className=\"item\">\n            <div className=\"title\">{name}</div>\n            <div id={videoId} className=\"imgbox\">\n                {/* <img src={props.img} alt=\"\" />   */}\n            </div>\n            {/* <div className=\"lookit\" onClick={() => props.parent(tokenId)}><FontAwesomeIcon icon={[\"fas\", \"eye\"]} /> <b className=\"fakehref\">Look it!</b></div> */}\n            <div className=\"lookit-div\"><Link className=\"lookit\" to={plantPath}><FontAwesomeIcon icon={[\"fas\", \"eye\"]} /> <b className=\"fakehref\">Look it!</b></Link></div>\n            <div className=\"row\">\n                <div className=\"col-4 col-name\">Owner</div>\n                <div className=\"col-8\">{owner.substring(0,6) + \"...\" + owner.substring(owner.length-4, owner.length)}</div>\n            </div>\n            <div className=\"row\">\n                <div className=\"col-4 col-name\">Feature</div>\n                <div className=\"col-8\">\n                    <PlantFeature name={name} />\n                </div>\n            </div>\n            <div className=\"row price-row\">\n                <div className=\"col-4 col-name\">Price</div>\n                <div className=\"col-8\">\n                    {priceHtml}\n                </div>\n            </div>\n        </div>\n    </div>\n    );\n};\n\nexport default PlantGridUnit;","import React, { useState, useEffect } from 'react';\nimport PlantGridUnit from \"./PlantGridUnit\"\nimport {EthContext} from \"./EthContext.js\";\nconst l = console.log;\n\nconst PlantGrid = (props) => {\n    const [totalSupply, setTotalSupply] = useState(0);\n    const {nft} = React.useContext(EthContext);\n    // const nft = ethCxt.getNft();\n    // let account = props.account;\n    // Similar to componentDidMount and componentDidUpdate:\n    useEffect(() => {\n        l('in PlantGrid useEffect(), nft:', nft);\n        if (nft!=null){\n            nft.totalSupply().then(totalSupply => {\n                // l(\"totalSupply:\" , totalSupply);\n                setTotalSupply(totalSupply);\n            });\n        }\n        // Update the document title using the browser API\n        return function cleanup() {\n          l('in useEffect cleanup()');\n        };\n    }, [nft]);\n\n    // console.log(\"in PlantGrid!!\");\n    const childCall = (tokenId) => {\n        l(\"PlantGrid childcall tokenId:\" + tokenId);\n    };\n    // l(\"grid, account:%s\", account);\n    var i;\n    const items = [];\n    for (i = 0; i < totalSupply; i++) {\n        items.push(<PlantGridUnit key={i} id={i} parent={childCall} />);\n    }\n\n    return(\n        <div className=\"row gallery\">\n            {items}\n        </div>\n    );\n};\n\nexport default PlantGrid;\n","export function ts2time(unixTs){\n  var date = new Date(unixTs * 1000);\n\n  var hours = \"0\" +date.getHours();\n  var minutes = \"0\" + date.getMinutes();\n  var seconds = \"0\" + date.getSeconds();\n  \n  return `${hours.substr(-2)}:${minutes.substr(-2)}:${seconds.substr(-2)}`;\n\n}\n\nexport function ts2date(unixTs){\n    var date = new Date(unixTs * 1000);\n  \n    var mon = \"0\" + (date.getMonth()+1);\n    var day = \"0\" + date.getDate();\n    return `${date.getFullYear()}-${mon.substr(-2)}-${day.substr(-2)}`;\n}\n\nexport function ts2datetime(unixTs, timezone=false){\n    let datetime = `${ts2date(unixTs)} ${ts2time(unixTs)}`;\n    datetime = timezone ? datetime + ` (${Intl.DateTimeFormat().resolvedOptions().timeZone})` : datetime;\n    return datetime;\n}\n// let ts = 1603163299;\n// console.log(ts2date(ts));\n// console.log(ts2datetime(ts));\n// console.log(ts2(1549312452));\n// console.log(date.toString());","import React, { useState, useEffect } from 'react';\nimport './css/OverlayPhoto.css';\n// const l = console.log;\n// export default function OverlayPhoto(props){ \n// const OverlayPhoto = (props, ref) => {\nconst OverlayPhoto = (props) => {\n    const [current, setCurrent] = useState(\"\");\n\n    useEffect(() => {\n        setCurrent(props.current);\n    }, [props]);\n    if (!props.show) return null;\n    let preHtml = props.handlePrevious!=null ? \n                <div className=\"overlay-arrow\" onClick={props.handlePrevious} ><h1>&lt;</h1></div> : \n                <div className=\"overlay-arrow\" /> ;\n    let nextHtml = props.handleNext!=null ? \n                <div className=\"overlay-arrow\" onClick={props.handleNext} ><h1>&gt;</h1></div> : \n                <div className=\"overlay-arrow\" /> ;\n     \n    return(\n        <div id=\"myNav\" className=\"overlay\">\n            <h1 className=\"closebtn\" onClick={props.handleClose}>&times;</h1>\n            {/* <div className=\"closebtn\" onClick={props.handleClose}>&times;</div> */}\n            <div className=\"overlay-content\">\n                {preHtml}\n                <div className=\"overlay-photo\">\n                    <img alt={props.description}  src={current} />\n                    <div className=\"date\">{props.description}</div>\n                </div>\n                {nextHtml}\n            </div>\n        </div>\n    );\n};\n\n\nexport default OverlayPhoto;\n","import React, { useState, useEffect, useImperativeHandle } from 'react';\n// util\nimport { ts2date, ts2datetime } from './ts.js';\nimport {VideoPrefix, VideoServer} from \"./config.js\" \nimport './css/Album.scss';\nimport OverlayPhoto from \"./OverlayPhoto.js\"\nimport { scrollToTargetAdjusted } from './util.js';\n\nconst l = console.log;\n\nvar prefix = \"\";\nvar suffix = \"\";\n// const Album =  forwardRef((props, ref) => {\nvar Album = React.forwardRef((props, ref) => {\n    const [photoTsAry, setPhotoTsAry] = useState([]);\n    const [, setUpdateTs] = useState();\n    const [showOverlayPhoto, setShowOverlayPhoto] = useState(false);\n    const [photoCurrentTs, setPhotoCurrentTs] = useState(0);\n    const [foucusImgId, setFocusImgId] = useState(\"\");\n\n    const takePhotoUpdate = (imgTs) => {\n        setUpdateTs(Date.now());\n        setFocusImgId(imgTs);\n    };\n    let { name } = props;\n\n    useEffect(() => {\n        // l('in album useEffect(), name=', name);\n        fetchPhotoList(name);\n        return function cleanup() {\n          l('in Album(%s) cleanup()', name);\n        };\n    }, [name]);\n\n    useEffect(() => {\n        console.log(\"useEffect foucusImgId!\")\n        if (foucusImgId!==\"\"){\n            // const element = document.getElementById(foucusImgId);\n            // element.scrollIntoView({behavior: 'smooth'});\n            scrollToTargetAdjusted(foucusImgId);\n        }\n    }, [foucusImgId]);\n\n    useImperativeHandle(ref, () => ({\n\n        addPhoto: (newPhoto) => {\n            if (!newPhoto['success']){\n                console.error(\"Add photo error, err:\" + newPhoto['detail']);\n                return ;\n            }\n\n            let fSplit = newPhoto['detail'].split('.');\n            let ts = parseInt(fSplit[0]);\n            let dateStr = ts2date(ts);\n            if (!photoTsAry.hasOwnProperty(dateStr)){\n                photoTsAry[dateStr] = [];\n            }\n            \n            const newArray = [ts].concat(photoTsAry);\n            setPhotoTsAry(newArray);\n            return {\n                cleanValue: takePhotoUpdate(ts)\n            }\n        }\n    \n    }));\n\n    function fetchPhotoList(name) {\n        fetch(VideoPrefix + name + \"/photo/list\")\n        .then(res => res.json())\n        .then(\n            (result) => {\n                if (result['photos']==null|| result['photos'].length <=0){\n                    return;\n                }\n                suffix = result['photos'][0].split('.')[1];\n                prefix = result['prefix'];\n                let  tsAry = [];\n                for (const f of result['photos']) {\n                    let fSplit = f.split('.');\n                    let ts = parseInt(fSplit[0]);\n                    tsAry.push(ts);\n                }\n                // descending\n                tsAry.sort(function(a, b){return b-a});\n                setPhotoTsAry(tsAry);\n            },\n            // Note: it's important to handle errors here\n            // instead of a catch() block so that we don't swallow\n            // exceptions from actual bugs in components.\n            (error) => {\n                // setIsLoaded(true);\n                // setError(error);\n                l(error);\n            }\n        )\n    }\n\n    function showPhoto(phototTs){\n        setPhotoCurrentTs(phototTs);\n        setShowOverlayPhoto(true);\n    }\n\n    // array to map\n    let tmpDatePhotoDic = {};\n    let preDate = \"\";\n    var datePhotoAry = NaN;\n    for (let i = 0; i < photoTsAry.length; i++) {\n        let ts = photoTsAry[i];\n        let dateStr = ts2date(ts);\n        // l(dateStr);\n        if (dateStr!==preDate){\n            datePhotoAry = [];//new Array();\n            // tmpDatePhotoDic.set(dateStr, datePhotoAry);\n            tmpDatePhotoDic[dateStr] = datePhotoAry;\n            preDate = dateStr;\n        }\n        // let photoUrl = prefix + String(ts) + \".\" + suffix;\n        datePhotoAry.push(ts);\n    }\n\n    // prepare datePhotosHtml\n    let datePhotosHtml = [];\n    for (var dateStr in tmpDatePhotoDic) {\n        datePhotosHtml.push( <div key={dateStr} className=\"caption\">{dateStr}</div>)\n        \n        for (const ts of tmpDatePhotoDic[dateStr]) {\n            // console.log(dateStr + \" -> \" + url);\n            let photoUrl = VideoServer + prefix + String(ts) + \".\" + suffix;\n            datePhotosHtml.push( <img id={ts} key={ts} alt={name+\"_\"+ts} className=\"photo\" src={photoUrl} onClick={() => showPhoto(ts)}  />)\n        }\n    }\n\n    // for OverlayPhoto\n    let photoCurrentTsIdx = photoCurrentTs > 0 ? photoTsAry.indexOf(photoCurrentTs):0;\n    let description= photoCurrentTs > 0 ? ts2datetime(photoCurrentTs, true) : \"\";\n    let currentUrl = photoCurrentTs > 0 ? (VideoServer + prefix + String(photoCurrentTs) + \".\" + suffix)  : \"\";\n    let preFunc = (photoCurrentTsIdx>0) ?  () => showPhoto( photoTsAry[photoCurrentTsIdx-1] )  : null;\n    let nextFunc = (photoCurrentTsIdx < (photoTsAry.length-1))  ?  () => showPhoto(photoTsAry[photoCurrentTsIdx+1] )  : null;\n    return (\n        <>\n        <div className=\"album\"> {datePhotosHtml} </div>\n        <OverlayPhoto show={showOverlayPhoto} handleClose={() => setShowOverlayPhoto(false)}\n                    current={currentUrl}\n                    handlePrevious={preFunc} \n                    handleNext={nextFunc}\n                    description={description} />\n        </>\n    )\n});\nAlbum.displayName = 'Album';\nexport default Album;","import React, { useState, useEffect, useRef } from 'react';\nimport {useParams} from \"react-router-dom\";\nimport LoadingBar from './LoadingBar'\nimport Album from './Album';\n// fontawesome\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCamera } from '@fortawesome/free-solid-svg-icons'\nimport { playRemote } from './util.js';\nimport { VideoPrefix } from \"./config.js\"; \nimport { EthContext } from \"./EthContext.js\";\nimport { PlantFeature } from './PlantFeature';\nimport { useTopAlert } from './useTopAlert'\n\nlibrary.add(faCamera)\n\nconst l = console.log;\n\nconst Plant = (props) => {\n    // react\n    const [tokenId, setTokenId] = useState(-1);\n    const [owner, setOwner] = useState('0x');\n    const [isLoading, setIsLoading] = useState(false);\n    const [pc, setPC] = useState(null);\n    const albumRef = useRef();\n    const {nft, account, ethLink} = React.useContext(EthContext);\n    // react-router\n    let { name } = useParams();\n    const { showMessage: showFail, RenderTopAlert: ErrorBox} = useTopAlert() \n    \n    let  videoId = name + \"Video\";\n    useEffect(() => {\n        // l('in useEffect(), nft:' +nft);\n        if (nft!=null){\n            nft.nftID(name).then(nftId => {\n                setTokenId(nftId);\n                nft.ownerOf(nftId).then(own => {\n                    setOwner(own);\n                });\n            });\n        }\n        \n        return function cleanup() {\n          l('in Plant(%d) cleanup(), name:', name);\n        };\n    }, [nft, name]);\n\n    useEffect(() => {\n        return function cleanup() {\n            if (pc!==null && pc!==undefined){\n                pc.close();\n            }     \n        };\n    }, [pc]);\n\n    useEffect(() => {\n        let get_pc = playRemote(name, videoId);\n        setPC(get_pc);\n    }, [name, videoId]);\n\n    // useEffect(() => {\n    //     document.title = `[${name}] ethPlant.com`;\n    // }, [name]);\n\n    async function takePhoto() {\n        // scrollToTargetAdjusted(\"1605016746\");\n        //  return\n        if (ethLink.signer===null || ethLink.signer===undefined){\n            showFail(\"Please login account first.\")\n            return\n        }\n        if (tokenId < 0){\n            showFail(\"tokenId NOT ready.\")\n            return\n        }\n        if(account!==owner){\n            showFail(\"You are not owner!\")\n            return\n        }\n        setIsLoading(true);\n        \n        let snapshotSign = await ethLink.signer.signMessage(\"snapshot\");\n        // l(\"snapshotSign: \"+ snapshotSign);\n        const postUrl = VideoPrefix + name + \"/photo/take\";\n        const rawResponse = await fetch(postUrl, {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\"action\":\"takephoto\", \"sign_data\":snapshotSign })\n        });\n        const res = await rawResponse.json();\n        console.log(\"takephoto res: \");\n        console.log(res);\n        if (res[\"success\"]===true){\n            let albumResult = albumRef.current.addPhoto(res);\n            console.log(\"albumResult:\");\n            console.log(albumResult);\n        }else{\n            showFail(res[\"detail\"]);\n        }\n        setIsLoading(false);\n\n    }\n    \n    return (\n        \n        <div className=\"row gallery\">\n            <ErrorBox />\n            <div className=\"col-md-1 col-sm-0\" />\n            <div className=\"col-md-10 col-sm-12\">\n                <LoadingBar show={isLoading} />\n                <div className=\"item\">\n                    <div className=\"title\">{name}</div>\n                    <div id={videoId} className=\"imgbox imgbox-169\"> \n                        {/* <img src={props.img} alt=\"\" />   */}\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col-12\">\n                            <div className=\"plant-cmd-click\" onClick={() => takePhoto()}><FontAwesomeIcon icon={[\"fas\", \"camera\"]} /> <b className=\"fakehref\">Take Picture</b></div>\n                        </div>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col-4 col-lg-2 col-name\">Owner</div>\n                        <div className=\"col-8 col-lg-10\">{owner.substring(0,6) + \"...\" + owner.substring(owner.length-4, owner.length)}</div>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col-4 col-lg-2 col-name\">Feature</div>\n                        <div className=\"col-8 col-lg-10\">\n                            <PlantFeature name={name} />\n                        </div>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col-4 col-lg-2 col-name\">Album</div>\n                        <div className=\"col-8 col-lg-10\">\n\n                            <Album name={name} ref={albumRef}/>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className=\"col-md-1 col-sm-0\" />\n        </div>\n\n    );\n\n};\n\nexport default Plant;\n","import React from 'react';\nimport './css/PageTail.scss';\nexport default function PageTail(){ \n    return(\n        <>\n        <hr/>\n        <div id=\"contact-div\" className=\"contactBottom\">\n            <a href=\"https://discord.gg/qcn4rka3n7\" rel=\"noopener noreferrer\" target=\"_blank\"><img src=\"/discord_128.png\" alt=\"ethplant's discord\"/></a>\n            <a href=\"https://twitter.com/ethplant\" rel=\"noopener noreferrer\" target=\"_blank\"><img src=\"/twitter_128.png\" alt=\"ethplant's twitter\"/></a>\n        </div>\n        <div className=\"copyright\">© 2020 ethplant.com</div>\n        </>\n    )\n};","import { useEffect} from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport TagManager from 'react-gtm-module'\n\nconst usePageTracking = () => {\n  const location = useLocation();\n\n//   useEffect(() => {\n//     console.log(\"in usePageTracking: INIT\");\n//     ReactGA.initialize(\"G-DBYXR3NDZN\");\n// }, []);\n\n    useEffect(() => {\n        console.log(\"in usePageTracking TagManager: \" + location.pathname + location.search);\n        const tagManagerArgs = {\n            dataLayer: {\n                page: location.pathname + location.search\n            },\n            dataLayerName: 'PageDataLayer'\n        }\n        TagManager.dataLayer(tagManagerArgs)\n    }, [location]);\n};\n\nexport default usePageTracking;","import React, {useState, useEffect} from 'react';\nimport Navigation from \"./Navigation\"\nimport './css/app.scss';\nimport {\n    Switch,\n    Route  \n} from \"react-router-dom\";\nimport PlantGrid from \"./PlantGrid\"\nimport Plant from \"./Plant\"\nimport PageTail from \"./PageTail\"\nimport usePageTracking from \"./usePageTracking.js\"\nimport {ethLink, EthContext} from \"./EthContext.js\"\n// const l = console.log;\n\nfunction App() {\n    const [nft, setNft] = useState(ethLink.setNft);\n    const [account, setAccount] = useState(ethLink.account);\n    // const msgCxt = useContext(MsgBoxContext);\n    usePageTracking();\n    useEffect(() => {\n        ethLink.setAppState(setAccount, setNft);\n        let gnft = ethLink.getNft();\n        setNft(gnft);\n    }, []);\n\n    // l(\"in App\")\n  \n    return (\n        <div className=\"app\">\n        \n            <div id='top-alert' />\n            <EthContext.Provider\n                value={{ nft, setNft, account, setAccount, ethLink }}>\n                <Navigation />\n                <div className=\"container\">    \n                    <Switch>\n                        <Route exact path=\"/\">\n                            <PlantGrid  />\n                        </Route>\n                        <Route path=\"/@:name\" children={<Plant />} />      \n                    </Switch>\n                </div>\n            </EthContext.Provider>\n            <PageTail />\n        </div>\n);\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {  BrowserRouter as Router} from \"react-router-dom\";\nimport * as serviceWorker from './serviceWorker';\nimport TagManager from 'react-gtm-module';\n \nconst tagManagerArgs = {\n    gtmId: 'GTM-WJDZSX6'\n}\n \nTagManager.initialize(tagManagerArgs);\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router basename={process.env.PUBLIC_URL} >\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}