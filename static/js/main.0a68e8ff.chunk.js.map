{"version":3,"sources":["Navigation.js","LoadingBar.js","config.js","util.js","PlantFeature.js","PlantGridUnit.js","PlantGrid.js","ts.js","OverlayPhoto.js","Album.js","Plant.js","App.js","usePageTracking.js","serviceWorker.js","index.js"],"names":["Navigation","Navbar","collapseOnSelect","expand","bg","Brand","as","Link","to","Toggle","aria-controls","Collapse","id","Nav","className","NavItem","eventkey","href","LoadingBar","props","show","type","color","height","width","VideoPrefix","VideoServer","playRemote","name","videoId","undefined","pc","RTCPeerConnection","sdpSemantics","addTransceiver","direction","ontrack","event","el","document","createElement","track","kind","srcObject","streams","autoplay","controls","muted","setAttribute","getElementById","appendChild","createOffer","then","offer","setLocalDescription","fetch","method","headers","body","JSON","stringify","res","console","log","json","setRemoteDescription","catch","alert","l","PlantFeature","useState","feature","setFeature","useEffect","jsonURL","result","error","fetchFeature","featureHtml","liKey","featureUnit","push","key","style","library","add","faEye","PlantGridUnit","priceHtml","setName","owner","setOwner","price","setPrice","listSell","setListSell","listSellPrice","setListSellPrice","changeRow","setChangeRow","isLoading","setIsLoading","tokenId","nft","buyNFT","a","once","i_tokenId","buy","value","parseInt","ownerOf","own","ethers","utils","parseEther","toString","priceWei","setForSale","cancelSale","nftName","getSale","account","step","min","onChange","target","Button","variant","onClick","sellNFT","cancelSell","ethHtml","formatUnits","plantPath","icon","substring","length","PlantGrid","totalSupply","setTotalSupply","i","childCall","items","parent","ts2time","unixTs","date","Date","hours","getHours","minutes","getMinutes","seconds","getSeconds","substr","ts2date","mon","getMonth","day","getDate","getFullYear","OverlayPhoto","current","setCurrent","preHtml","handlePrevious","nextHtml","handleNext","handleClose","src","description","prefix","suffix","Album","React","forwardRef","ref","photoTsAry","setPhotoTsAry","setUpdateTs","showOverlayPhoto","setShowOverlayPhoto","photoCurrentTs","setPhotoCurrentTs","showPhoto","phototTs","split","tsAry","fSplit","ts","sort","b","useImperativeHandle","addPhoto","newPhoto","dateStr","hasOwnProperty","newArray","concat","cleanValue","now","tmpDatePhotoDic","preDate","datePhotoAry","NaN","Array","datePhotosHtml","photoUrl","String","photoCurrentTsIdx","indexOf","timezone","datetime","Intl","DateTimeFormat","resolvedOptions","timeZone","ts2datetime","currentUrl","preFunc","nextFunc","displayName","faCamera","provider","signer","Plant","setTokenId","albumRef","useRef","useParams","postUrl","rawResponse","nftID","nftId","takePhoto","usePageTracking","location","useLocation","ReactGA","initialize","pathname","search","pageview","window","ethereum","autoRefreshOnNetworkChange","web3","enable","providers","Web3Provider","e","JsonRpcProvider","getSigner","Contract","PlantNFT","abi","getAddress","response","App","isInfo","InfoAlert","Alert","position","top","exact","path","children","Boolean","hostname","match","ReactDOM","render","StrictMode","basename","process","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.0a68e8ff.chunk.js","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Navbar, Nav, NavItem } from 'react-bootstrap';\nimport \"./css/navagation.css\"\n// export default Navigation = (props) => {\nexport default function Navigation() {\n    return (\n        <Navbar collapseOnSelect expand=\"lg\" bg=\"light\" >\n        <Navbar.Brand as={Link} to=\"/\" >ethplant.com</Navbar.Brand>\n        <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\n        <Navbar.Collapse id=\"responsive-navbar-nav\">\n          <Nav className=\"mr-auto\">\n            <NavItem eventkey={1} href=\"/\">\n                  <Nav.Link as={Link} to=\"/\" >Home</Nav.Link>\n            </NavItem>\n          </Nav>\n        </Navbar.Collapse>\n      </Navbar>\n    );\n};","import React from 'react';\nimport ReactLoading from 'react-loading';\nimport './css/LoadingBar.scss';\nexport default function LoadingBar(props){ \n    if (!props.show) return null;\n    return (\n        <div id=\"overlay\">\n            <div className=\"w-100 d-flex justify-content-center align-items-center\">\n                <ReactLoading type={\"bars\"} color={\"#fff\"} height={'20%'} width={'20%'} />\n            </div>\n        </div>\n        \n    );\n};","export const EthProvider = \"http://localhost:7545\"; //\"http://192.168.0.117:7545\";\nexport const VideoServer = \"https://localhost:8080\"; //\"http://192.168.0.117:8080\";\nexport const VideoPrefix = VideoServer + \"/@\";","import {VideoPrefix} from \"./config.js\" \n\nexport function playRemote(name, videoId){\n    if (name==='' || name ===undefined){\n        return;\n    }\n    let pc = new RTCPeerConnection({ sdpSemantics : \"unified-plan\" })\n    // let pc = new RTCPeerConnection ({ sdpSemantics : \"plan-b\" });\n    // pc.addTransceiver('video')\n    // pc.addTransceiver('video')\n    pc.addTransceiver('video', {direction: \"recvonly\"})\n\n    pc.ontrack = function (event) {\n        var el = document.createElement(event.track.kind)\n        el.srcObject = event.streams[0]\n        el.autoplay = true\n        el.controls = true\n        el.muted = true\n        el.setAttribute('autoplay', '');\n        el.setAttribute('muted', '');\n        el.setAttribute('playsInline', '');\n\n        el.className = \"videoFull\"\n        // document.getElementById(name + 'Video').appendChild(el)\n        document.getElementById(videoId).appendChild(el)\n    }\n\n    pc.createOffer()\n    .then(offer => {\n        pc.setLocalDescription(offer)\n        // console.log(\"offer:\");\n        // console.log(JSON.stringify(offer));\n        return fetch(VideoPrefix + name +'/video', {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json, text/plain, */*',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(offer)\n        })\n    })\n    .then(res => {\n        console.log(`res:`);\n        console.log(res);\n        return res.json();\n    })\n    .then(res => pc.setRemoteDescription(res))\n    .catch(alert)\n}\n\n/*\nasync function playRemote(name){\n    let pc = new RTCPeerConnection()\n    pc.addTransceiver('video')\n\n    pc.ontrack = function (event) {\n        var el = document.createElement(event.track.kind)\n        el.srcObject = event.streams[0]\n        el.autoplay = true\n        el.controls = true\n        el.muted = true\n\n        document.getElementById(name + 'Video').appendChild(el)\n    }\n\n\n\n    let offer =  await pc.createOffer()\n    l(\"offer:\" + JSON.stringify(offer));\n    const postUrl = \"http://localhost:8080/@\" + name + \"/video\"; // \"/photo/take\";//name + \"/video\";\n    const rawResponse = await fetch(postUrl, {\n        method: 'POST',\n        headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(offer)//JSON.stringify({\"name\":\"adam\", \"action\":\"takephoto\", \"sign_data\":\"\"}) //JSON.stringify(offer)\n    });\n    const res = await rawResponse.json();\n    l(\"res:\" + res);\n}*/","import React, { useState, useEffect } from 'react';\nconst l = console.log;\n\nexport const PlantFeature = (props) => {\n    const [feature, setFeature] = useState([]);\n    useEffect(() => {\n        // l(\"props.name:\" + props.name);\n        if (props.name!==\"\"){\n            fetchFeature(props.name)\n        }\n    }, [props.name]);\n\n    function fetchFeature(name) {\n        let jsonURL = \"/data/\" + name + \".json\";\n        fetch(jsonURL)\n        .then(res => res.json())\n        .then(\n            (result) => {\n                setFeature(result['features'])\n            },\n            // Note: it's important to handle errors here\n            // instead of a catch() block so that we don't swallow\n            // exceptions from actual bugs in components.\n            (error) => {\n                l(\"jsonURL:\" + jsonURL);\n                l(\"fetchFeature error: \");\n                l(error);\n            }\n        )\n    }\n\n    let featureHtml = [];\n    let liKey=0;\n    for (const featureUnit of feature) {\n        liKey++;\n        featureHtml.push(<li key={liKey}>{featureUnit}</li>);\n    }\n\n    return(\n        <ul style={{\"paddingLeft\": \"0rem\"}}>\n            {featureHtml}\n        </ul>\n    )\n\n}","import React, { useState, useEffect } from 'react';\nimport { ethers } from \"ethers\";\n\nimport LoadingBar from './LoadingBar'\n// bootstrap\nimport Button from 'react-bootstrap/Button';\n// router\nimport {Link} from \"react-router-dom\";\n// fontawesome\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEye } from '@fortawesome/free-solid-svg-icons'\nimport { playRemote } from './util.js';\nimport { PlantFeature } from './PlantFeature';\n//css\nimport './css/PlantGridUnit.scss';\n\nlibrary.add(faEye)\n\nconst l = console.log;\n\nconst PlantGridUnit = (props) => {\n    const [name, setName] = useState('');\n    const [owner, setOwner] = useState('0x');\n    const [price, setPrice] = useState(0);\n    const [listSell, setListSell] = useState(false);\n    const [listSellPrice, setListSellPrice] = useState(0);\n    const [changeRow, setChangeRow] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n    // const [renderIt, setRenderIt] = useState(false);\n    // const [, updateState] = React.useState();\n    let tokenId = props.id; // token id\n    let nft = props.nft;\n    let  videoId = name + \"Video\";\n    useEffect(() => {\n        // l('in useEffect(), id:' +props.id);\n        \n        nft.nftName(tokenId).then(nftName => {\n            setName(nftName);\n        });\n\n        nft.ownerOf(tokenId).then(own => {\n            setOwner(own);\n        });\n\n        nft.getSale(tokenId).then(price => {\n            setPrice(price);\n        });\n\n\n        // Update the document title using the browser API\n        return function cleanup() {\n        //   l('in PlantItem cleanup(), id:' +props.id);\n        };\n    }, [owner]);\n\n    useEffect(() => {\n        playRemote(name, videoId);\n    }, [name]);\n    \n    async function buyNFT() {\n        await nft.once(\"NFTBuyEvent\", (i_tokenId) => {\n            l(\"in NFTBuyEvent FIRST:, i_tokenId:\" + i_tokenId);\n        });\n        setIsLoading(true);\n        try {\n            await nft.buy(tokenId, {value: price});\n        }catch (error) {   \n            console.log(\"Buy error:\" + error);\n            setIsLoading(false);\n        }  \n        await nft.once(\"NFTBuyEvent\", (i_tokenId) => {\n            l(\"in NFTBuyEvent\");\n            if (parseInt(i_tokenId)===tokenId){\n                nft.ownerOf(tokenId).then(own => {\n                    setOwner(own);\n                });\n                setIsLoading(false);\n            }\n        });\n        \n    }\n    \n    async function sellNFT() {\n        // try to ignore the event\n        await nft.once(\"NFTSellEvent\", (i_tokenId, price) => {\n            l(\"in NFTSellEvent FIRST:, i_tokenId:\" + i_tokenId + \", price:\" + price);\n        });\n\n        let priceWei = await ethers.utils.parseEther(listSellPrice.toString());\n        // l(\"Sell Price: \" + price+ \", priceWei:\" + priceWei);\n        setIsLoading(true);\n        try {\n            await nft.setForSale(tokenId, priceWei);\n        } catch (error) {   \n            console.log(\"Sale error:\" + error);\n            setListSell(false);\n            setChangeRow(false);\n            setIsLoading(false);\n        }\n\n        await nft.once(\"NFTSellEvent\", (i_tokenId, price) => {\n            l(\"in NFTSellEvent:, i_tokenId:\" + i_tokenId + \", price:\" + price);\n\n            if (parseInt(i_tokenId)===tokenId){\n                setPrice(price);\n                setListSell(false);\n                setChangeRow(false);\n                setIsLoading(false);\n            }\n        });\n        \n    }\n    \n    async function cancelSell() {\n        await nft.once(\"NFTSellEvent\", (i_tokenId, price) => {\n            l(\"in cancelSell NFTSellEvent FIRST:, i_tokenId:\" + i_tokenId + \", price:\" + price);\n        });\n        setIsLoading(true);\n\n        try {\n            await nft.cancelSale(tokenId);\n        }catch (error) {   \n            console.log(\"cancelSale error:\" + error);\n            setListSell(false);\n            setChangeRow(false);\n            setIsLoading(false);\n        }  \n        \n        await nft.once(\"NFTSellEvent\", (i_tokenId, price) => {\n            if (parseInt(i_tokenId)===tokenId){\n                setPrice(price);\n                setListSell(false);\n                setChangeRow(false);\n                setIsLoading(false);\n            }\n        });\n        \n    }\n\n    var priceHtml;\n    // l(\"unit id(%d) owener:%s, props.account:%s\", tokenId, owner, props.account);\n    // l(\" type(owener):%s, props.account:%s\", typeof(owner), typeof(props.account));\n    if (owner===props.account){\n        // ------------ the item belong owner ------------ //\n        if (listSell){\n            priceHtml = [\n                <div key=\"0\" className=\"row list-sell\"> \n                    <input type=\"number\" step=\"0.01\" min=\"0\" \n                           id=\"sellprice\" name=\"sellprice\" onChange={event => setListSellPrice(event.target.value)}/>\t\n                    <Button className=\"sellbtn\" variant=\"danger\" onClick={() => sellNFT(false)}>Sell</Button>          \n                    <Button className=\"close\" variant=\"secondary\" onClick={() => setListSell(false)}>X</Button>\n                </div>];\n\n        } else if (price > 0){\n            if (!changeRow){\n                let formattedBalance = ethers.utils.formatUnits(price, 18);\n                let ethHtml = \"Ξ \" + formattedBalance;\n                priceHtml = [<div key=\"0\" className=\"row\"> \n                                    <div className=\"col-5 price\">{ethHtml}</div>\n                                    <div className=\"col-7 price-btn\">\n                                        <Button variant=\"outline-warning\" onClick={() => setChangeRow(true)}>Change</Button>\n                                    </div>\n                            </div>];\n            }else{\n                priceHtml = [\n                    <div className=\"row change-price-row\"> \n                        <Button className=\"change-price\" variant=\"danger\" onClick={() => setListSell(true)}>Price</Button>          \n                        <Button className=\"revoke-sale\" variant=\"secondary\" onClick={() => cancelSell()}>Revoke</Button>\n                        <Button className=\"close\" variant=\"secondary\" onClick={() => setChangeRow(false)}>X</Button>\n                    </div>];\n            }\n        }else{\n            // l(\"in owner==props.account else, should price <= 0\");\n            priceHtml = [<div key=\"0\" className=\"row\"> \n                            <div className=\"col-5 price\">No Sale</div>\n                            <div className=\"col-7 price-btn\">\n                                <Button variant=\"outline-danger\" onClick={() => setListSell(true)}>List Sell</Button>\n                            </div>\n                        </div>];\n            \n        }\n    }else{\n        // ------------ the item is NOT belong owner ------------ //\n        if (price > 0){\n            let formattedBalance = ethers.utils.formatUnits(price, 18);\n            let ethHtml = \"Ξ \" + formattedBalance;\n            priceHtml = [<div key=\"0\" className=\"row\"> \n                                <div className=\"col-5 price\">{ethHtml}</div>\n                                <div className=\"col-7 buy-btn-row\">\n                                    <Button variant=\"success\" onClick={async () => {await buyNFT();} }>Buy</Button>\n                                </div>\n                        </div>];\n        \n        }else{\n            priceHtml = \"No Sale\";\n        }\n    }\n    const plantPath = \"/@\" +name;\n   \n    return (\n\n    <div className=\"col-md-4 col-sm-6\">\n        <LoadingBar show={isLoading} />\n        <div className=\"item\">\n            <div className=\"title\">{name}</div>\n            <div id={videoId} className=\"imgbox\">\n                {/* <img src={props.img} alt=\"\" />   */}\n            </div>\n            {/* <div className=\"lookit\" onClick={() => props.parent(tokenId)}><FontAwesomeIcon icon={[\"fas\", \"eye\"]} /> <b className=\"fakehref\">Look it!</b></div> */}\n            <div className=\"lookit-div\"><Link className=\"lookit\" to={plantPath}><FontAwesomeIcon icon={[\"fas\", \"eye\"]} /> <b className=\"fakehref\">Look it!</b></Link></div>\n            <div className=\"row\">\n                <div className=\"col-4 col-name\">Owner</div>\n                <div className=\"col-8\">{owner.substring(0,6) + \"...\" + owner.substring(owner.length-4, owner.length)}</div>\n            </div>\n            <div className=\"row\">\n                <div className=\"col-4 col-name\">Feature</div>\n                <div className=\"col-8\">\n                    <PlantFeature name={name} />\n                </div>\n            </div>\n            <div className=\"row price-row\">\n                <div className=\"col-4 col-name\">Price</div>\n                <div className=\"col-8\">\n                    {priceHtml}\n                </div>\n            </div>\n        </div>\n    </div>\n    );\n};\n\nexport default PlantGridUnit;","import React, { useState, useEffect } from 'react';\nimport PlantGridUnit from \"./PlantGridUnit\"\n\nconst l = console.log;\n\nconst PlantGrid = (props) => {\n    const [totalSupply, setTotalSupply] = useState(0);\n    let nft = props.nft;\n    let account = props.account;\n    // Similar to componentDidMount and componentDidUpdate:\n    useEffect(() => {\n        // l('in PlantGrid useEffect(), nft:', nft);\n        if (nft!=null){\n            nft.totalSupply().then(totalSupply => {\n                // l(\"totalSupply:\" , totalSupply);\n                setTotalSupply(totalSupply);\n            });\n        }\n        // Update the document title using the browser API\n        return function cleanup() {\n          l('in useEffect cleanup()');\n        };\n    }, [nft]);\n\n    const childCall = (tokenId) => {\n        l(\"PlantGrid childcall tokenId:\" + tokenId);\n    };\n    // l(\"grid, account:%s\", account);\n    var i;\n    const items = [];\n    for (i = 0; i < totalSupply; i++) {\n        items.push(<PlantGridUnit key={i} id={i} nft={nft} account={account} parent={childCall} />);\n    }\n\n    return(\n        <div className=\"row gallery\">\n            {items}\n        </div>\n    );\n};\n\nexport default PlantGrid;\n","export function ts2time(unixTs){\n  var date = new Date(unixTs * 1000);\n\n  var hours = \"0\" +date.getHours();\n  var minutes = \"0\" + date.getMinutes();\n  var seconds = \"0\" + date.getSeconds();\n  \n  return `${hours.substr(-2)}:${minutes.substr(-2)}:${seconds.substr(-2)}`;\n\n}\n\nexport function ts2date(unixTs){\n    var date = new Date(unixTs * 1000);\n  \n    var mon = \"0\" + (date.getMonth()+1);\n    var day = \"0\" + date.getDate();\n    return `${date.getFullYear()}-${mon.substr(-2)}-${day.substr(-2)}`;\n}\n\nexport function ts2datetime(unixTs, timezone=false){\n    let datetime = `${ts2date(unixTs)} ${ts2time(unixTs)}`;\n    datetime = timezone ? datetime + ` (${Intl.DateTimeFormat().resolvedOptions().timeZone})` : datetime;\n    return datetime;\n}\n// let ts = 1603163299;\n// console.log(ts2date(ts));\n// console.log(ts2datetime(ts));\n// console.log(ts2(1549312452));\n// console.log(date.toString());","import React, { useState, useEffect } from 'react';\nimport './css/OverlayPhoto.css';\nconst l = console.log;\n// export default function OverlayPhoto(props){ \n// const OverlayPhoto = (props, ref) => {\nconst OverlayPhoto = (props) => {\n    const [current, setCurrent] = useState(\"\");\n\n    useEffect(() => {\n        setCurrent(props.current);\n    }, [props]);\n    if (!props.show) return null;\n    let preHtml = props.handlePrevious!=null ? \n                <div className=\"overlay-arrow\" onClick={props.handlePrevious} ><h1>&lt;</h1></div> : \n                <div className=\"overlay-arrow\" /> ;\n    let nextHtml = props.handleNext!=null ? \n                <div className=\"overlay-arrow\" onClick={props.handleNext} ><h1>&gt;</h1></div> : \n                <div className=\"overlay-arrow\" /> ;\n     \n    return(\n        <div id=\"myNav\" className=\"overlay\">\n            <h1 className=\"closebtn\" onClick={props.handleClose}>&times;</h1>\n            {/* <div className=\"closebtn\" onClick={props.handleClose}>&times;</div> */}\n            <div className=\"overlay-content\">\n                {preHtml}\n                <div className=\"overlay-photo\">\n                    <img src={current} />\n                    <div className=\"date\">{props.description}</div>\n                </div>\n                {nextHtml}\n            </div>\n        </div>\n    );\n};\n\n\nexport default OverlayPhoto;\n","import React, { useState, useEffect, useImperativeHandle } from 'react';\n// util\nimport { ts2date, ts2datetime } from './ts.js';\nimport {VideoPrefix} from \"./config.js\" \nimport './css/Album.scss';\nimport OverlayPhoto from \"./OverlayPhoto.js\"\n\nconst l = console.log;\n\nvar prefix = \"\";\nvar suffix = \"\";\n\n// const Album =  forwardRef((props, ref) => {\nvar Album = React.forwardRef((props, ref) => {\n    const [photoTsAry, setPhotoTsAry] = useState([]);\n    const [, setUpdateTs] = useState();\n    const [showOverlayPhoto, setShowOverlayPhoto] = useState(false);\n    const [photoCurrentTs, setPhotoCurrentTs] = useState(0);\n\n    const forceUpdate = () => {\n        // l(\"in forceUpdate:\");\n        // l(photoTsAry);\n        setUpdateTs(Date.now());\n    };\n    let { name } = props;\n\n    useEffect(() => {\n        // l('in album useEffect(), name=', name);\n        fetchPhotoList()\n        \n        return function cleanup() {\n          l('in Album(%s) cleanup()', name);\n        };\n    }, [name]);\n\n    useImperativeHandle(ref, () => ({\n\n        addPhoto: (newPhoto) => {\n            if (!newPhoto['success']){\n                console.error(\"Add photo error, err:\" + newPhoto['detail']);\n                return ;\n            }\n\n            let fSplit = newPhoto['detail'].split('.');\n            let ts = parseInt(fSplit[0]);\n            let dateStr = ts2date(ts);\n            if (!photoTsAry.hasOwnProperty(dateStr)){\n                photoTsAry[dateStr] = [];\n            }\n            \n            const newArray = [ts].concat(photoTsAry);\n            setPhotoTsAry(newArray);\n            return {\n                cleanValue: forceUpdate()\n            }\n        }\n    \n    }));\n\n    function fetchPhotoList() {\n        fetch(VideoPrefix + name + \"/photo/list\")\n        .then(res => res.json())\n        .then(\n            (result) => {\n                if (result['photos'].length <=0){\n                    return;\n                }\n                suffix = result['photos'][0].split('.')[1];\n                prefix = result['prefix'];\n                let datePhoto = [];\n                let  tsAry = [];\n                for (const f of result['photos']) {\n                    let fSplit = f.split('.');\n                    let ts = parseInt(fSplit[0]);\n                    tsAry.push(ts);\n                }\n                // descending\n                tsAry.sort(function(a, b){return b-a});\n                setPhotoTsAry(tsAry);\n            },\n            // Note: it's important to handle errors here\n            // instead of a catch() block so that we don't swallow\n            // exceptions from actual bugs in components.\n            (error) => {\n                // setIsLoaded(true);\n                // setError(error);\n                l(error);\n            }\n        )\n    }\n\n    function showPhoto(phototTs){\n        setPhotoCurrentTs(phototTs);\n        setShowOverlayPhoto(true);\n    }\n\n    // array to map\n    let tmpDatePhotoDic = {};\n    let preDate = \"\";\n    var datePhotoAry = NaN;\n    for (let i = 0; i < photoTsAry.length; i++) {\n        let ts = photoTsAry[i];\n        let dateStr = ts2date(ts);\n        // l(dateStr);\n        if (dateStr!==preDate){\n            datePhotoAry = new Array();\n            // tmpDatePhotoDic.set(dateStr, datePhotoAry);\n            tmpDatePhotoDic[dateStr] = datePhotoAry;\n            preDate = dateStr;\n        }\n        // let photoUrl = prefix + String(ts) + \".\" + suffix;\n        datePhotoAry.push(ts);\n    }\n\n    // prepare datePhotosHtml\n    let datePhotosHtml = [];\n    for (var dateStr in tmpDatePhotoDic) {\n        datePhotosHtml.push( <div key={dateStr} className=\"caption\">{dateStr}</div>)\n        \n        for (const ts of tmpDatePhotoDic[dateStr]) {\n            // console.log(dateStr + \" -> \" + url);\n            let photoUrl = prefix + String(ts) + \".\" + suffix;\n            datePhotosHtml.push( <img key={ts} className=\"photo\" src={photoUrl} onClick={() => showPhoto(ts)}  />)\n        }\n    }\n\n    // for OverlayPhoto\n    let photoCurrentTsIdx = photoCurrentTs > 0 ? photoTsAry.indexOf(photoCurrentTs):0;\n    let description= photoCurrentTs > 0 ? ts2datetime(photoCurrentTs, true) : \"\";\n    let currentUrl = photoCurrentTs > 0 ? (prefix + String(photoCurrentTs) + \".\" + suffix)  : \"\";\n    let preFunc = (photoCurrentTsIdx>0) ?  () => showPhoto( photoTsAry[photoCurrentTsIdx-1] )  : null;\n    let nextFunc = (photoCurrentTsIdx < (photoTsAry.length-1))  ?  () => showPhoto(photoTsAry[photoCurrentTsIdx+1] )  : null;\n    return (\n        <>\n        <div className=\"album\"> {datePhotosHtml} </div>\n        <OverlayPhoto show={showOverlayPhoto} handleClose={() => setShowOverlayPhoto(false)}\n                    current={currentUrl}\n                    handlePrevious={preFunc} \n                    handleNext={nextFunc}\n                    description={description} />\n        </>\n    )\n});\nAlbum.displayName = 'Album';\nexport default Album;","import React, { useState, useEffect, useRef } from 'react';\nimport {useParams} from \"react-router-dom\";\nimport LoadingBar from './LoadingBar'\nimport Album from './Album';\n\n\n// fontawesome\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCamera } from '@fortawesome/free-solid-svg-icons'\nimport { playRemote } from './util.js';\nimport {VideoPrefix} from \"./config.js\"; \n\nimport { PlantFeature } from './PlantFeature';\nlibrary.add(faCamera)\n\nconst l = console.log;\n\nconst Plant = (props) => {\n    // react\n    const [tokenId, setTokenId] = useState(-1);\n    const [owner, setOwner] = useState('0x');\n    const [isLoading, setIsLoading] = useState(false);\n    const [feature, setFeature] = useState([]);\n    const albumRef = useRef();\n    // react-router\n    let { name } = useParams();\n    \n    let nft = props.nft;\n    let  videoId = name + \"Video\";\n    useEffect(() => {\n        // l('in useEffect(), nft:' +nft);\n        if (nft!=null){\n            nft.nftID(name).then(nftId => {\n                setTokenId(nftId);\n                nft.ownerOf(nftId).then(own => {\n                    setOwner(own);\n                });\n            });\n        }\n        \n        // Update the document title using the browser API\n        // fetchPhotoList();\n        \n        return function cleanup() {\n          l('in Plant(%d) cleanup()', props.id);\n        };\n    }, [nft]);\n\n    useEffect(() => {\n        playRemote(name, videoId);\n        // fetchFeature(name)\n    }, [name]);\n\n    function fetchFeature(name) {\n        let jsonURL = \"/data/\" + name + \".json\";\n        fetch(jsonURL)\n        .then(res => res.json())\n        .then(\n            (result) => {\n                setFeature(result['features'])\n            },\n            // Note: it's important to handle errors here\n            // instead of a catch() block so that we don't swallow\n            // exceptions from actual bugs in components.\n            (error) => {\n                l(\"fetchFeature error: \", + error)\n            }\n        )\n    }\n\n    async function takePhoto() {\n        const postUrl = VideoPrefix + name + \"/photo/take\";\n        const rawResponse = await fetch(postUrl, {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\"name\":name, \"action\":\"takephoto\", \"sign_data\":\"\"})\n        });\n        const res = await rawResponse.json();\n        albumRef.current.addPhoto(res);\n    }\n    let featureHtml = [];\n    for (const featureUnit of feature) {\n        featureHtml.push(<li>{featureUnit}</li>);\n    }\n    // l(\"Feature:\" + feature);\n    // l(\"featureHtml:\" + featureHtml);\n    \n    return (\n        <div className=\"row gallery\">\n            <div className=\"col-md-1 col-sm-0\" />\n            <div className=\"col-md-10 col-sm-12\">\n                <LoadingBar show={isLoading} />\n                <div className=\"item\">\n                    <div className=\"title\">{name}</div>\n                    <div id={videoId} className=\"imgbox imgbox-169\"> \n                        {/* <img src={props.img} alt=\"\" />   */}\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col-12\">\n                            <div className=\"plant-cmd-click\" onClick={() => takePhoto()}><FontAwesomeIcon icon={[\"fas\", \"camera\"]} /> <b className=\"fakehref\">Take Picture</b></div>\n                        </div>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col-4 col-lg-2 col-name\">Owner</div>\n                        <div className=\"col-8 col-lg-10\">{owner.substring(0,6) + \"...\" + owner.substring(owner.length-4, owner.length)}</div>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col-4 col-lg-2 col-name\">Feature</div>\n                        <div className=\"col-8 col-lg-10\">\n                            <PlantFeature name={name} />\n                        </div>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col-4 col-lg-2 col-name\">Album</div>\n                        <div className=\"col-8 col-lg-10\">\n\n                            <Album name={name} ref={albumRef}/>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className=\"col-md-1 col-sm-0\" />\n        </div>\n\n    );\n\n};\n\nexport default Plant;\n","import React, { useState, useEffect} from 'react';\n// bootstrap\nimport Alert from 'react-bootstrap/Alert';\nimport Navigation from \"./Navigation\"\nimport 'bootstrap/dist/css/bootstrap.min.css';\n// import './App.css';\nimport './css/app.scss';\n// contract\nimport { ethers } from \"ethers\";\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    useLocation  \n} from \"react-router-dom\";\n// import { createBrowserHistory } from \"history\";\n\nimport PlantNFT from \"./contracts/PlantNFT.json\";\n// import PlantItem from \"./PlantItem\"\nimport PlantGrid from \"./PlantGrid\"\nimport Plant from \"./Plant\"\n\nimport {EthProvider} from \"./config.js\"\nimport usePageTracking from \"./usePageTracking.js\"\n\nconst l = console.log;\n// const WebName = \"ethplant.com\";\nconst contractAddress ='0xBCa4cE7CcF8D70332fdb5717f39f2971c8109874';\n// account (metamask)\nlet provider;\nlet signer;\nlet noProviderAbort = true;\nlet nft;\nlet account;\n\n// l(\"window.ethereum:\" );\n// l(window.ethereum);\n\nif (window.ethereum!==undefined){\n    window.ethereum.autoRefreshOnNetworkChange = false;\n}\n\n\nif (typeof window.ethereum !== 'undefined' || (typeof window.web3 !== 'undefined')) {\n    try{\n        // Ethers.js set up, gets data from MetaMask and blockchain\n        window.ethereum.enable().then(\n            provider = new ethers.providers.Web3Provider(window.ethereum)\n        );\n          \n    } catch(e) {\n        noProviderAbort = true;\n    }\n}else{\n    provider = new ethers.providers.JsonRpcProvider(EthProvider);\n    // web3 = new Web3(provider);\n}\n\n\nif (provider!=null){\n    signer = provider.getSigner();\n    nft = new ethers.Contract(contractAddress, PlantNFT.abi, signer);\n    // setNFT(inft);\n    noProviderAbort = false;\n    signer.getAddress().then(response => {\n        // setAccount(response);\n        account = response;\n    });\n}\nfunction usePageViews() {\n    let location = useLocation();\n    React.useEffect(() => {\n    //   ga.send([\"pageview\", location.pathname]);\n    l(\"in usePageViews:\"+ location);\n    }, [location]);\n}\n// const history = createBrowserHistory();\n\n// history.listen((location) => {\n//     // window.ga('set', 'page', location.pathname + location.search);\n//     // window.ga('send', 'pageview');\n//     console.log(\"in history.listen, path: \" +  location.pathname + location.search);\n// });\n\n// const App = ()  => {\nfunction App() {\n    const [isInfo, setIsInfo] = useState(false);\n    // const [nft, setNFT] = useState(null);\n    // const [account, setAccount] = useState('0x');\n\n    usePageTracking();\n    // Aborts app if metamask etc not present\n    // useEffect(() => {\n    //     l('App() in useEffect()');\n    //     // Ensures metamask or similar installed\n    //     // setNFT(inft);\n    //     setAccount(account);\n    // }, [account]);\n\n    // usePageViews();\n    usePageTracking();\n\n    // if (noProviderAbort) {\n    //     return (\n    //         <div>\n    //         <h1>Error</h1>\n    //         <p><a href=\"https://metamask.io\">Metamask</a> or equivalent required to access this page.</p>\n    //         </div>\n    //     );\n    // }\n\n    // Notification to user that transaction sent to blockchain\n    const InfoAlert = () => {\n        if (!isInfo) return null;\n        return (\n            <Alert key=\"info\" variant=\"info\" \n            style={{position: 'absolute', top: 0}}>\n            MSG\n            </Alert>\n        );\n    };\n\n    // l(\"in App, account: \", account);\n  \n    return (\n        <div className=\"app\">\n            <InfoAlert />\n            <div className=\"container\">\n            <Navigation />\n            <Switch>\n                <Route exact path=\"/\">\n                    <PlantGrid nft={nft} account={account} />\n                </Route>\n                <Route path=\"/@:name\" children={<Plant nft={nft} account={account} />} />      \n            </Switch>\n                  \n            </div>\n        </div>\n);\n};\n\nexport default App;\n","import { useEffect} from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport ReactGA from \"react-ga\";\n\nconst usePageTracking = () => {\n  const location = useLocation();\n\n  useEffect(() => {\n    console.log(\"in usePageTracking: INIT\");\n    ReactGA.initialize(\"G-DBYXR3NDZN\");\n}, []);\n\n  useEffect(() => {\n    console.log(\"in usePageTracking: \" + location.pathname + location.search);\n    // ReactGA.initialize(\"G-DBYXR3NDZN\");\n    ReactGA.pageview(location.pathname + location.search);\n  }, [location]);\n};\n\nexport default usePageTracking;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {  BrowserRouter as Router} from \"react-router-dom\";\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router basename={process.env.PUBLIC_URL} >\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}